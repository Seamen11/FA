{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Ввод проектов</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        let projectCount = 1;

        function addProject() {
            projectCount++;
            const table = document.getElementById("projectsTable");
            const row = table.insertRow(-1);
            row.innerHTML = `
                <td>Проект ${projectCount}</td>
                <td><input type="text" class="form-control" name="project_${projectCount}_levels" placeholder="Уровни инвестиций, например: 0, 50, 100, 150" required></td>
                <td><input type="text" class="form-control" name="project_${projectCount}_profits" placeholder="Прибыль, например: 0, 20, 50, 80" required></td>
            `;
        }
    </script>
</head>
<body>
    <div class="container py-5">
        <h2 class="text-center">Введите данные для проектов</h2>

        <!-- Форма для ввода данных -->
        <form method="POST" action="{% url 'enter_projects_page' %}">
            {% csrf_token %}
            
            <!-- Поле для ввода начального бюджета -->
            <div class="mb-3">
                <label for="budget" class="form-label">Начальный бюджет</label>
                <input type="number" class="form-control" id="budget" name="budget" value="300" required>
            </div>

            <table class="table table-bordered" id="projectsTable">
                <thead>
                    <tr>
                        <th>Проект</th>
                        <th>Уровни инвестиций</th>
                        <th>Прибыль</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Проект 1</td>
                        <td><input type="text" class="form-control" name="project_1_levels" value="0, 50, 100, 150, 200" required></td>
                        <td><input type="text" class="form-control" name="project_1_profits" value="0, 20, 44, 60, 75" required></td>
                        <td><button type="button" class="btn btn-danger" onclick="removeRow(this)">Удалить</button></td>
                    </tr>
                </tbody>
            </table>
            <div class="text-center">
                <button type="button" class="btn btn-info" onclick="addProject()">Добавить проект</button>
                <button type="submit" class="btn btn-success mt-3">Рассчитать</button>
            </div>
        </form>

        <p><a href="{% url 'home' %}">Вернуться на главную</a></p>
    </div>

    <script>
        // Функция для добавления нового проекта
        document.getElementById('add-project-btn').addEventListener('click', function() {
            let tableBody = document.querySelector('#projects-table tbody');
            let rowCount = tableBody.rows.length + 1;
            let newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td>Проект ${rowCount}</td>
                <td><input type="text" name="project_${rowCount}_levels" value="0, 50, 100, 150, 200" required></td>
                <td><input type="text" name="project_${rowCount}_profits" value="0, 20, 44, 60, 75" required></td>
                <td><button type="button" class="btn btn-danger" onclick="removeRow(this)">Удалить</button></td>
            `;
            tableBody.appendChild(newRow);
        });

        // Функция для удаления строки проекта
        function removeRow(button) {
            button.closest('tr').remove();
        }
    </script>
</body>
</html>
